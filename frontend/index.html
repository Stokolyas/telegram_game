<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Web App</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .status-bar {
            width: 80%;
            height: 30px;
            background-color: lightgrey;
            position: relative;
            margin-bottom: 20px;
        }
        .status-bar-fill {
            height: 100%;
            background-color: green;
            width: 0;
        }
        .status-bar-text {
            position: absolute;
            width: 100%;
            text-align: center;
            top: 5px;
        }
        #click-count {
            margin-top: 20px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="status-bar">
        <div class="status-bar-fill" id="status-bar-fill"></div>
        <div class="status-bar-text" id="status-bar-text">0 / 10</div>
    </div>
    <img src="https://example.com/stone_head.png" alt="Stone Head" id="click-button" style="cursor: pointer;">
    <div id="click-count">Клики: 0</div>
    <div id="energy-status">Энергия: 0 / 10</div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        let clickCount = 0;
        let energy = 10;
        const maxEnergy = 10;

        const statusBarFill = document.getElementById('status-bar-fill');
        const statusBarText = document.getElementById('status-bar-text');
        const clickButton = document.getElementById('click-button');
        const clickCountDiv = document.getElementById('click-count');
        const energyStatus = document.getElementById('energy-status');

        function updateStatusBar() {
            const percentage = (clickCount % 10) * 10;
            statusBarFill.style.width = percentage + '%';
            statusBarText.textContent = `${clickCount % 10} / 10`;
        }

        function updateClickCount() {
            clickCountDiv.textContent = `Клики: ${clickCount}`;
        }

        function updateEnergyStatus() {
            energyStatus.textContent = `Энергия: ${energy} / ${maxEnergy}`;
        }

        function handleButtonClick() {
            if (energy > 0) {
                clickCount++;
                energy--;
                updateClickCount();
                updateEnergyStatus();
                updateStatusBar();

                if (clickCount % 10 === 0) {
                    new Audio('https://example.com/dum_dum.mp3').play();
                }
            } else {
                alert('Не хватает энергии!');
            }
        }

        clickButton.addEventListener('click', handleButtonClick);

        updateStatusBar();
        updateClickCount();
        updateEnergyStatus();
    </script>
</body>
</html>
